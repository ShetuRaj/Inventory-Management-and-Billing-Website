<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--Custom CSS-->
  <link rel="stylesheet" href="styles.css">
  <!-- Semantic UI CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <title>Sales Filter</title>
</head>
<body>
  <!--Vertical Navbar-->
  <div class="vertical-nav bg-white" id="sidebar">
    <div class="py-4 px-3 mb-4" style="background: linear-gradient(to top, #0066eb 0%, #ff8ab3 68%);">
      <div class="media d-flex align-items-center"><img src="admin.svg" alt="..." width="65" class="mr-3 rounded-circle img-thumbnail shadow-sm">
        &emsp;<div class="media-body">
          <h4 class="m-0"><p class="text-white"><shop-name></h4>
            <p class="font-weight-light text-white mb-0">(Admin)</p>
        </div>
      </div>
    </div>
    <form action="/logout?_method=DELETE" method="POST">
      <center><button type="submit" class="btn btn-danger" ><p class="text-white">Log Out</p></button></center>
    </form>
    <h5 class="ui horizontal divider header text-primary">
      MAIN
    </h5>
  
    <ul class="nav flex-column bg-white mb-0">
      <li class="nav-item">
        <a href="/" class="nav-link text-dark font-italic" >
                  <i class="home icon"></i>
                  Dashboard
                
              </a>
      </li>
      <li class="nav-item">
        <a href="/billing" class="nav-link text-dark font-italic">
          <i class="rupee sign icon"></i>
                  Bill
              </a>
      </li>
      <li class="nav-item">
        <a href="/orders" class="nav-link text-dark font-italic">
          <i class="eye icon"></i>
                  View Orders
              </a>
      </li>
      <li class="nav-item">
        <a href="/viewstocks" class="nav-link text-dark font-italic">
          <i class="tags icon"></i>
                  View Stocks
              </a>
      </li>
      <li class="nav-item">
        <a href="/stocks" class="nav-link text-dark font-italic">
          <i class="plus circle icon"></i>
                  Add Stock
              </a>
      </li>
    </ul>
  
    <h5 class="ui horizontal divider header text-primary">
      CUSTOMIZE
    </h5>
  
    <ul class="nav flex-column bg-white mb-0">
      <li class="nav-item">
        <a href="/brands" class="nav-link text-dark font-italic">
          <i class="yelp icon"></i>
                  Brand
              </a>
      </li>
      <li class="nav-item">
        <a href="/categories" class="nav-link text-dark font-italic">
          <i class="bookmark icon"></i>
                  Category
              </a>
      </li>
      <li class="nav-item">
        <a href="/sizes" class="nav-link text-dark font-italic">
          <i class="check square icon"></i>
                  Size
              </a>
      </li>
    </ul>
  
    <h5 class="ui horizontal divider header text-primary">
      FILTERS
    </h5>
  
    <ul class="nav flex-column bg-white mb-0">
      <li class="nav-item">
        <a href="/sales_filter" class="nav-link text-dark font-italic" style="background: linear-gradient(to right, #0066eb 0%, #ff8ab3 68%);">
          <i class="yelp icon"></i>
                  Sales
              </a>
      </li>
      <li class="nav-item">
        <a href="/stock_filter" class="nav-link text-dark font-italic">
          <i class="bookmark icon"></i>
                  Stock
              </a>
      </li>
    </ul>
  </div>
  <!-- End vertical navbar -->
  
  
  <!-- Page content holder -->
  <div class="page-content p-5" id="content" style="background: linear-gradient(to right, #e9edf1 47%, #ff8ab3 100%); ">
    <!-- Toggle button -->
    <button id="sidebarCollapse" type="button" class="btn btn-light bg-white rounded-pill shadow-sm px-4 mb-4"><i class="align justify icon"></i><small class="text-uppercase font-weight-bold">Menu</small></button>
  
    <!-- Page content -->
   
    <br>
    <h1>SALES FILTER</h1>
    <br>
    <center><img class="ui medium rounded image" src="sales_filter.svg"></center>
    <br>
    <form action="/sales_filter_query" method="POST">
    <div class="ui four column grid">
    <div class="row">
    <div class="column">
    <h3>Select Time Period</h3>
    </div>
    
    <div class="column">
      <div class="form-check form-check-inline form-switch">
          <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="month" oninput="myFunction()">
          <label class="form-check-label" for="exampleRadios2">
              Month
          </label>
      </div>
      <div class="form-check form-check-inline form-switch">
          <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="year" oninput="myFunction()">
          <label class="form-check-label" for="exampleRadios3">
              Year
          </label>
      </div>
    </div>
    <div class="column">
        <select class="form-select" aria-label="Disabled select example" id="month" name="selected_month" disabled>
            <option selected>Select Month</option>
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
    </div>
    <div class="column">
        <select class="form-select" aria-label="Disabled select example" id="year" name="selected_year" disabled>
            <option selected>Select Year</option>
            <option value="2021">2021</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
            <option value="2024">2024</option>
            <option value="2025">2025</option>
          </select>
    </div>
    </div>
    
    
    <div class="row">
    <div class="column">
    <h3>Filter By</h3>
    </div>
    <div class="column">
    <div class="form-check form-check-inline form-switch">
        <input class="form-check-input" type="radio" name="exampleRadios1" id="exampleRadios10" value="all">
        <label class="form-check-label" for="exampleRadios10">
            All
        </label>
    </div>
    <div class="form-check form-check-inline form-switch">
        <input class="form-check-input" type="radio" name="exampleRadios1" id="exampleRadios11" value="brand">
        <label class="form-check-label" for="exampleRadios11">
            Brand
        </label>
    </div>
    <div class="form-check form-check-inline form-switch">
         <input class="form-check-input" type="radio" name="exampleRadios1" id="exampleRadios22" value="category">
        <label class="form-check-label" for="exampleRadios22">
            Category
        </label>
    </div>
  
    </div>
   
    </div>
    </div>
    <br>
    <br>
    <center>
    <div class="ui left corner labeled action input">
      <button class="ui teal button" type="submit">Apply Filter</button>
      <div class="ui corner label">
        <i class="asterisk icon"></i>
      </div>
    </div>
  </center>
</form>
    <br>
    <br>
  
    <% if (time_type == 'month') { %>
      
      <% if (filter_type == 'all') { %> 
        <div class="ui container">
          <canvas id="myChart"></canvas>
        </div>
        <div id="chartdata" class="chartdata" name="chartdata" value="<%= display_content %> "></div>
      <center>
        <h2 class="text-primary">Showing Results for <%= month_name %> (<%= year %>), Filter_Type = ALL</h2>
        <br>
        <div class="ui two column grid">
          <div class="row">
            <div class="column">
          <div class="ui card">
            <div class="content">
              <div class="center aligned header"></div>
              <div class="center aligned description">
                <h1 class="text-success"><i class="rupee sign icon"></i><% total_amount.forEach(function(order){ %>
                  <%= order.Amount %>
                <% }); %></h1>
              </div>
            </div>
            <div class="extra content">
              <div class="center aligned author text-danger">
                <i class="rupee sign icon"></i> Total Sales in <%= month_name %> <%= year %> 
              </div>
            </div>
          </div>
          </div>
          <div class="column">
            <div class="ui card">
              <div class="content">
                <div class="center aligned header"></div>
                <div class="center aligned description">
                  <h1 class="text-primary"><i class="shopping cart icon"></i><% total_amount.forEach(function(order){ %>
                    <%= order.Count %>
                  <% }); %></h1>
                </div>
              </div>
              <div class="extra content">
                <div class="center aligned author text-danger">
                  <i class="shopping cart icon"></i> Total Items Sold in <%= month_name %> <%= year %> 
                </div>
              </div>
            </div>
            </div>
            </div>
            </div>
        <table class="ui inverted violet table table-bordered" >
          <thead>
          <tr class="table-success">
              <th>Date <i class="calendar alternate outline icon"></i></th>
              <th>Items Sold <i class="cart arrow down icon"></i></th>
              <th>Total Sales <i class="rupee sign icon"></i></th>
          </tr>
      </thead>
      <tbody>
          <% display_content.forEach(function(order){ %>
              <tr style="background: linear-gradient(to left, #0066eb 0%, #ff8ab3 68%);">
                 
                  <td><%= order.TransactionDate %></td>
                  <td><%= order.Count %></td>
                  <td><i class="rupee sign icon"></i> <%= order.Amount %></td>
              </tr>
          <% }); %>
        </tbody>
      </table>
    </center> 
        <% } %>

        <% if (filter_type == 'brand') { %> 
          <center>
            <h2 class="text-primary">Showing Results for <%= month_name %> (<%= year %>), Filter_Type = BRAND </h2>
            <br>
            <div class="ui container">
              <canvas id="myChart"></canvas>
            </div>
            <br>
            <div class="ui two column grid">
              <div class="row">
                <div class="column">
              <div class="ui card">
                <div class="content">
                  <div class="center aligned header"></div>
                  <div class="center aligned description">
                    <h1 class="text-success"><i class="rupee sign icon"></i><% total_amount.forEach(function(order){ %>
                      <%= order.Amount %>
                    <% }); %></h1>
                  </div>
                </div>
                <div class="extra content">
                  <div class="center aligned author text-danger">
                    <i class="rupee sign icon"></i> Total Sales in <%= month_name %> <%= year %> 
                  </div>
                </div>
              </div>
              </div>
              <div class="column">
                <div class="ui card">
                  <div class="content">
                    <div class="center aligned header"></div>
                    <div class="center aligned description">
                      <h1 class="text-primary"><i class="shopping cart icon"></i><% total_amount.forEach(function(order){ %>
                        <%= order.Count %>
                      <% }); %></h1>
                    </div>
                  </div>
                  <div class="extra content">
                    <div class="center aligned author text-danger">
                      <i class="shopping cart icon"></i> Total Items Sold in <%= month_name %> <%= year %> 
                    </div>
                  </div>
                </div>
                </div>
                </div>
                </div>
          <table class="ui inverted violet table table-bordered" >
            <thead>
            <tr class="table-success">
                <th>Brand <i class="yelp icon"></i></th>
                <th>Items Sold <i class="cart arrow down icon"></i></th>
                <th>Total Sales <i class="rupee sign icon"></i></th>
            </tr>
        </thead>
        <tbody>
            <% display_content.forEach(function(order){ %>
                <tr style="background: linear-gradient(to left, #0066eb 0%, #ff8ab3 68%);">
                    <td><%= order.Brand %></td>
                    <td><%= order.Count %></td>
                    <td><i class="rupee sign icon"></i> <%= order.Amount %> </td> 
                </tr>
            <% }); %>
          </tbody>
        </table>
      </center>
        <% } %>

        <% if (filter_type == 'category') { %> 
          <center>
            <h2 class="text-primary">Showing Results for <%= month_name %> (<%= year %>), Filter_Type = CATEGORY </h2>
            <br>
            <div class="ui two column grid">
              <div class="row">
                <div class="column">
              <div class="ui card">
                <div class="content">
                  <div class="center aligned header"></div>
                  <div class="center aligned description">
                    <h1 class="text-success"><i class="rupee sign icon"></i><% total_amount.forEach(function(order){ %>
                      <%= order.Amount %>
                    <% }); %></h1>
                  </div>
                </div>
                <div class="extra content">
                  <div class="center aligned author text-danger">
                    <i class="rupee sign icon"></i> Total Sales in <%= month_name %> <%= year %> 
                  </div>
                </div>
              </div>
              </div>
              <div class="column">
                <div class="ui card">
                  <div class="content">
                    <div class="center aligned header"></div>
                    <div class="center aligned description">
                      <h1 class="text-primary"><i class="shopping cart icon"></i><% total_amount.forEach(function(order){ %>
                        <%= order.Count %>
                      <% }); %></h1>
                    </div>
                  </div>
                  <div class="extra content">
                    <div class="center aligned author text-danger">
                      <i class="shopping cart icon"></i> Total Items Sold in <%= month_name %> <%= year %> 
                    </div>
                  </div>
                </div>
                </div>
                </div>
                </div>
          <table class="ui inverted violet table table-bordered" >
            <thead>
            <tr class="table-success">
                <th>Category <i class="list icon"></i></th>
                <th>Items Sold <i class="cart arrow down icon"></i></th>
                <th>Total Sales <i class="rupee sign icon"></i></th>
            </tr>
        </thead>
        <tbody>
            <% display_content.forEach(function(order){ %>
                <tr style="background: linear-gradient(to left, #0066eb 0%, #ff8ab3 68%);">
                    <td><%= order.Category %></td>
                    <td><%= order.Count %></td>
                    <td><i class="rupee sign icon"></i> <%= order.Amount %> </td> 
                </tr>
            <% }); %>
          </tbody>
        </table>
      </center>
        <% } %>

      <% } %>


      <% if (time_type == 'year') { %>
        <% const monthNames = ["January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"]; %> 
        <% if (filter_type == 'all') { %> 
        <center>
          <h2 class="text-primary">Showing Results for (<%= year %>), Filter_Type = ALL</h2>
          <br>
          <div class="ui two column grid">
            <div class="row">
              <div class="column">
            <div class="ui card">
              <div class="content">
                <div class="center aligned header"></div>
                <div class="center aligned description">
                  <h1 class="text-success"><i class="rupee sign icon"></i><% total_amount.forEach(function(order){ %>
                    <%= order.Amount %>
                  <% }); %></h1>
                </div>
              </div>
              <div class="extra content">
                <div class="center aligned author text-danger">
                  <i class="rupee sign icon"></i> Total Sales in <%= year %> 
                </div>
              </div>
            </div>
            </div>
            <div class="column">
              <div class="ui card">
                <div class="content">
                  <div class="center aligned header"></div>
                  <div class="center aligned description">
                    <h1 class="text-primary"><i class="shopping cart icon"></i><% total_amount.forEach(function(order){ %>
                      <%= order.Count %>
                    <% }); %></h1>
                  </div>
                </div>
                <div class="extra content">
                  <div class="center aligned author text-danger">
                    <i class="shopping cart icon"></i> Total Items Sold in <%= year %> 
                  </div>
                </div>
              </div>
              </div>
              </div>
              </div>
          <table class="ui inverted violet table table-bordered" >
            <thead>
            <tr class="table-success">
                <th>Month <i class="calendar alternate outline icon"></i></th>
                <th>Items Sold <i class="cart arrow down icon"></i></th>
                <th>Total Sales <i class="rupee sign icon"></i></th>
            </tr>
        </thead>
        <tbody>
            <% display_content.forEach(function(order){ %>
                <tr style="background: linear-gradient(to left, #0066eb 0%, #ff8ab3 68%);">
                   
                    <td><%= monthNames[parseInt(order.TMonth)-1] %></td>
                    <td><%= order.Count %></td>
                    <td><i class="rupee sign icon"></i> <%= order.Amount %></td>
                </tr>
            <% }); %>
          </tbody>
        </table>
      </center> 
          <% } %>
  
          <% if (filter_type == 'brand') { %> 
            <center>
              <h2 class="text-primary">Showing Results for (<%= year %>), Filter_Type = BRAND </h2>
              <br>
              <div class="ui two column grid">
                <div class="row">
                  <div class="column">
                <div class="ui card">
                  <div class="content">
                    <div class="center aligned header"></div>
                    <div class="center aligned description">
                      <h1 class="text-success"><i class="rupee sign icon"></i><% total_amount.forEach(function(order){ %>
                        <%= order.Amount %>
                      <% }); %></h1>
                    </div>
                  </div>
                  <div class="extra content">
                    <div class="center aligned author text-danger">
                      <i class="rupee sign icon"></i> Total Sales in <%= year %> 
                    </div>
                  </div>
                </div>
                </div>
                <div class="column">
                  <div class="ui card">
                    <div class="content">
                      <div class="center aligned header"></div>
                      <div class="center aligned description">
                        <h1 class="text-primary"><i class="shopping cart icon"></i><% total_amount.forEach(function(order){ %>
                          <%= order.Count %>
                        <% }); %></h1>
                      </div>
                    </div>
                    <div class="extra content">
                      <div class="center aligned author text-danger">
                        <i class="shopping cart icon"></i> Total Items Sold in <%= year %> 
                      </div>
                    </div>
                  </div>
                  </div>
                  </div>
                  </div>
            <table class="ui inverted violet table table-bordered" >
              <thead>
              <tr class="table-success">
                  <th>Brand <i class="yelp icon"></i></th>
                  <th>Items Sold <i class="cart arrow down icon"></i></th>
                  <th>Total Sales <i class="rupee sign icon"></i></th>
              </tr>
          </thead>
          <tbody>
              <% display_content.forEach(function(order){ %>
                  <tr style="background: linear-gradient(to left, #0066eb 0%, #ff8ab3 68%);">
                      <td><%= order.Brand %></td>
                      <td><%= order.Count %></td>
                      <td><i class="rupee sign icon"></i> <%= order.Amount %> </td> 
                  </tr>
              <% }); %>
            </tbody>
          </table>
        </center>
          <% } %>
  
          <% if (filter_type == 'category') { %> 
            <center>
              <h2 class="text-primary">Showing Results for (<%= year %>), Filter_Type = CATEGORY </h2>
              <br>
              <div class="ui two column grid">
                <div class="row">
                  <div class="column">
                <div class="ui card">
                  <div class="content">
                    <div class="center aligned header"></div>
                    <div class="center aligned description">
                      <h1 class="text-success"><i class="rupee sign icon"></i><% total_amount.forEach(function(order){ %>
                        <%= order.Amount %>
                      <% }); %></h1>
                    </div>
                  </div>
                  <div class="extra content">
                    <div class="center aligned author text-danger">
                      <i class="rupee sign icon"></i> Total Sales in <%= year %> 
                    </div>
                  </div>
                </div>
                </div>
                <div class="column">
                  <div class="ui card">
                    <div class="content">
                      <div class="center aligned header"></div>
                      <div class="center aligned description">
                        <h1 class="text-primary"><i class="shopping cart icon"></i><% total_amount.forEach(function(order){ %>
                          <%= order.Count %>
                        <% }); %></h1>
                      </div>
                    </div>
                    <div class="extra content">
                      <div class="center aligned author text-danger">
                        <i class="shopping cart icon"></i> Total Items Sold in <%= year %> 
                      </div>
                    </div>
                  </div>
                  </div>
                  </div>
                  </div>
            <table class="ui inverted violet table table-bordered" >
              <thead>
              <tr class="table-success">
                  <th>Category <i class="list icon"></i></th>
                  <th>Items Sold <i class="cart arrow down icon"></i></th>
                  <th>Total Sales <i class="rupee sign icon"></i></th>
              </tr>
          </thead>
          <tbody>
              <% display_content.forEach(function(order){ %>
                  <tr style="background: linear-gradient(to left, #0066eb 0%, #ff8ab3 68%);">
                      <td><%= order.Category %></td>
                      <td><%= order.Count %></td>
                      <td><i class="rupee sign icon"></i> <%= order.Amount %> </td> 
                  </tr>
              <% }); %>
            </tbody>
          </table>
        </center>
          <% } %>
  
        <% } %>
  
     
      
  </div>
  <!-- End page content -->
  
  
  
  <br>
 
  
  <!--Semantic UI Scripts-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.js"></script>
  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
  <script>
    $(function() {
      // Sidebar toggle behavior
      $('#sidebarCollapse').on('click', function() {
        $('#sidebar, #content').toggleClass('active');
      });
    });

  </script>

  <script>
    //   console.log(document.getElementsByTagName('input'))
    function myFunction(){
      if (document.getElementById('exampleRadios2').checked == true){
        document.getElementById("month").disabled = false;
        document.getElementById("year").disabled = false;
      }
      if (document.getElementById('exampleRadios3').checked == true){
        document.getElementById("year").disabled = false;
        document.getElementById("month").disabled = true;
      }
    }
  </script>

</body>
</html>


